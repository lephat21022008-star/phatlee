<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes" />
    <title>L·ªùi m·ªùi k·ª∑ y·∫øu üíå</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./style/style.css">

    <!-- B√≥ng cho b·ª©c th∆∞ -->
    <style>
      /* c∆° b·∫£n cho b·ª©c th∆∞: b√≥ng, bo g√≥c, v√† shadow inset nh·∫π */
      #envelope .letter {
        background: linear-gradient(180deg, #ffffff 0%, #faf7f7 100%);
        border-radius: 8px;
        box-shadow:
          0 30px 60px rgba(0,0,0,0.35),   /* b√≥ng m·ªÅm l·ªõn */
          0 8px 18px rgba(0,0,0,0.2),     /* b√≥ng trung b√¨nh */
          inset 0 -3px 10px rgba(0,0,0,0.04); /* b√≥ng trong nh·∫π ph√≠a d∆∞·ªõi */
        transition: transform 260ms ease, box-shadow 260ms ease;
        position: relative;
        z-index: 2;
      }

      /* khi phong b√¨ m·ªü: n√¢ng b·ª©c th∆∞ ƒë·ªÉ b√≥ng s√¢u h∆°n */
      #envelope.open .letter,
      #envelope.open .letter.show {
        transform: translateY(-8px);
        box-shadow:
          0 46px 90px rgba(0,0,0,0.45),
          0 12px 30px rgba(0,0,0,0.25),
          inset 0 -4px 14px rgba(0,0,0,0.05);
      }

      /* th√™m b√≥ng m·ªÅm ph√≠a d∆∞·ªõi phong b√¨ ƒë·ªÉ c·∫£m gi√°c n·ªïi */
      .envlope-wrapper::after {
        content: "";
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        bottom: 18px;
        width: 65%;
        height: 40px;
        background: radial-gradient(ellipse at center, rgba(0,0,0,0.28), rgba(0,0,0,0.08) 60%, transparent 70%);
        filter: blur(10px);
        z-index: 0;
        pointer-events: none;
      }

      /* ƒë·∫£m b·∫£o y·∫øu t·ªë con kh√¥ng b·ªã che b·ªüi pseudo-element */
      .envlope-wrapper { position: relative; z-index: 1; }

      /* ==== Responsive / Mobile tweaks ==== */
      html,body{height:100%;}
      body { -webkit-font-smoothing:antialiased; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; }

      /* T·ª± ƒë·ªông co phong b√¨ tr√™n m√†n h√¨nh nh·ªè, gi·ªØ t·ªâ l·ªá v√† cƒÉn gi·ªØa */
      .envlope-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 18px;
      }
      #envelope {
        width: min(680px, 92vw);
        max-width: 680px;
        touch-action: manipulation;
      }
      .controls {
        position: fixed;
        right: 16px;
        bottom: 16px;
        z-index: 10010;
        display: flex;
        gap: 8px;
      }
      .controls button {
        font-size: 16px;
        padding: 12px 16px;
        border-radius: 10px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.18);
        -webkit-tap-highlight-color: rgba(0,0,0,0.08);
      }

      /* RWD cho modal th∆∞ m·ªùi */
      .invitation { padding: 12px; }
      .invitation-card {
        width: 100%;
        max-width: 720px;
        margin: 0 6px;
        box-shadow: 0 12px 30px rgba(0,0,0,0.35);
      }
      .invitation-card h1 { font-size: 28px; }
      .invitation-card p { font-size: 15px; }

      /* Khi m√†n h√¨nh r·∫•t nh·ªè: gi·∫£m k√≠ch th∆∞·ªõc, tƒÉng contrast, touch targets */
      @media (max-width: 420px) {
        #envelope { width: 96vw; }
        .invitation-card { padding: 18px; }
        .controls button { font-size: 17px; padding: 14px 18px; }
        .invitation-card h1 { font-size: 22px; }
      }

      /* H·∫°n ch·∫ø shadow n·∫∑ng tr√™n thi·∫øt b·ªã y·∫øu ƒë·ªÉ tƒÉng hi·ªáu nƒÉng */
      @media (max-width: 360px), (max-device-width: 420px) and (orientation: portrait) {
        #envelope .letter { box-shadow: 0 14px 28px rgba(0,0,0,0.25), inset 0 -2px 8px rgba(0,0,0,0.03); }
        .envlope-wrapper::after { filter: blur(6px); height: 28px; }
      }
    </style>
</head>
<body>
    <div class="envlope-wrapper">
        <div id="envelope" class="close">
            <div class="wax-seal"></div>
            <div class="front flap"></div>
            <div class="front pocket"></div>
            <div class="letter">
                <div class="letter-corner corner-tl"></div>
                <div class="letter-corner corner-br"></div>
                <div class="message">
                    <div class="lyrics">
                    </div>
                </div>
            </div>
            <div class="hearts">
                <div class="heart a1"></div>
                <div class="heart a2"></div>
                <div class="heart a3"></div>
            </div>
            <div class="sparkles">
                <div class="sparkle s1"></div>
                <div class="sparkle s2"></div>
                <div class="sparkle s3"></div>
            </div>
        </div>
    </div>
    <div class="controls">
        <button id="openBtn">M·ªü</button>
        <button id="resetBtn" style="display: none;">ƒê√≥ng</button>
    </div>
    <audio id="sound" loop>
      <source src="./style/C√≥ ƒê√¥i ƒêi·ªÅu.mp3" type="audio/mpeg" />
    </audio>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="./style/script.js"></script>

    <!-- Th√™m: th∆∞ m·ªùi k·ªâ y·∫øu + style + script -->
    <style>
      .invitation {
        display: flex;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.6);
        align-items: center;
        justify-content: center;
        z-index: 9999;
        padding: 20px;
        opacity: 0;
        pointer-events: none;
        transition: opacity 260ms ease;
      }
      .invitation.show {
        opacity: 1;
        pointer-events: auto;
      }

      .invitation-card {
        width: 90%;
        max-width: 720px;
        background: #fff;
        border-radius: 10px;
        padding: 28px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        font-family: "Poppins", sans-serif;
        color: #222;
        transform: translateY(18px) scale(0.98);
        opacity: 0;
        transition: transform 360ms cubic-bezier(.2,.9,.3,1), opacity 360ms ease;
      }
      .invitation.show .invitation-card {
        transform: translateY(0) scale(1);
        opacity: 1;
      }

      .invitation-card h1 {
        margin: 0 0 12px;
        font-family: "Pacifico", cursive;
        color: #B30000;
        font-size: 34px;
      }
      .invitation-card p {
        margin: 8px 0;
        line-height: 1.45;
        opacity: 0;
        transform: translateY(8px);
        transition: transform 280ms ease, opacity 280ms ease;
      }
      .invitation-card p.reveal {
        opacity: 1;
        transform: translateY(0);
      }

      .invitation-actions {
        margin-top: 16px;
        text-align: right;
      }
      .invitation-actions button {
        background: #B30000;
        color: #fff;
        border: none;
        padding: 8px 14px;
        border-radius: 6px;
        cursor: pointer;
      }
      @media (max-width:420px){
        .invitation-card { padding: 18px; }
        .invitation-card h1 { font-size: 26px; }
      }
    </style>

    <div id="invitation" class="invitation" aria-hidden="true">
      <div class="invitation-card" role="dialog" aria-modal="true" aria-labelledby="invite-title">
        <h1 id="invite-title">Th∆∞ m·ªùi K·ªâ y·∫øu</h1>
        <p>dear beauty,</p>
        <p>M√¨nh r·∫•t vui khi b·∫°n ƒë√£ d√†nh th·ªùi gian qu√Ω b√°u c·ªßa b·∫£n th√¢n ƒë·ªÉ ƒë·ªçc l√° th∆∞ nho nh·ªè n√†y, s·∫Øp t·ªõi s·∫Ω l√† bu·ªïi l·ªÖ ch·ª•p k·ª∑ y·∫øu cu·ªëi c·∫•p c·ªßa m√¨nh c≈©ng l√† ng√†y sinh nh·∫≠t c·ªßa b·∫£n th√¢n m√¨nh n√™n m√¨nh th·ª±c s·ª± mu·ªën m·ªùi b·∫°n t·ªõi d·ª±.</p>
        <p><strong>Th·ªùi gian:</strong> 09:30, Th·ª© 7, ng√†y 21/02/2026</p>
        <p><strong>ƒê·ªãa ƒëi·ªÉm:</strong> Tr∆∞·ªùng THPT Nguy·ªÖn Tr√£i</p>
        <p>T·ªõ r·∫•t mong b·∫°n ƒë·∫øn ƒë√∫ng gi·ªù ƒë·ªÉ c√πng nhau ch·ª•p ·∫£nh l∆∞u ni·ªám. H·∫πn g·∫∑p b·∫°n t·∫°i bu·ªïi k·ª∑ y·∫øu!</p>
        <div class="invitation-actions">
          <button id="closeInvitationBtn">ƒê√≥ng</button>
        </div>
      </div>
    </div>

    <script>
      // Hi·ªÉn th·ªã th∆∞ m·ªùi khi b·∫•m n√∫t M·ªü; gi·ªØ nh·∫°c ƒëang ch·∫°y; reveal t·ª´ng d√≤ng
      (function(){
        const openBtn = document.getElementById('openBtn');
        const resetBtn = document.getElementById('resetBtn');
        const invitation = document.getElementById('invitation');
        const closeInvitationBtn = document.getElementById('closeInvitationBtn');
        const audio = document.getElementById('sound');

        function revealLines() {
          const paras = invitation.querySelectorAll('.invitation-card p');
          paras.forEach((p, i) => {
            p.classList.remove('reveal');
            setTimeout(() => p.classList.add('reveal'), 120 * i + 120);
          });
        }

        function clearReveals() {
          const paras = invitation.querySelectorAll('.invitation-card p');
          paras.forEach(p => p.classList.remove('reveal'));
        }

        function showInvitation() {
          // b·∫≠t audio n·∫øu ch∆∞a ch·∫°y (g·ªçi trong handler ng∆∞·ªùi d√πng)
          if (audio && audio.paused) {
            audio.play().catch(()=>{});
          }
          invitation.classList.add('show');
          invitation.setAttribute('aria-hidden', 'false');
          // reveal n·ªôi dung t·ª´ng d√≤ng
          revealLines();
          // hi·ªÉn th·ªã n√∫t ƒê√≥ng (reset)
          if (resetBtn) resetBtn.style.display = '';
        }

        function hideInvitation() {
          invitation.classList.remove('show');
          invitation.setAttribute('aria-hidden', 'true');
          clearReveals();
          // gi·ªØ nh·∫°c ch·∫°y (kh√¥ng d·ª´ng)
          if (resetBtn) resetBtn.style.display = 'none';
        }

        openBtn && openBtn.addEventListener('click', function(e){
          // ƒë·∫£m b·∫£o audio ƒë∆∞·ª£c k√≠ch ho·∫°t tr·ª±c ti·∫øp b·ªüi thao t√°c ch·∫°m
          if (audio && audio.paused) {
            audio.play().catch(()=>{});
          }
          // n·∫øu c·∫ßn ƒë·ª£i ho·∫°t ·∫£nh phong b√¨ hi·ªán c√≥, gi·ªØ th·ªùi gian ng·∫Øn
          setTimeout(showInvitation, 450);
        });

        resetBtn && resetBtn.addEventListener('click', function(){
          hideInvitation();
        });

        closeInvitationBtn && closeInvitationBtn.addEventListener('click', function(){
          hideInvitation();
        });

        // ·∫©n khi click ngo√†i th·∫ª th∆∞ m·ªùi
        invitation && invitation.addEventListener('click', function(e){
          if (e.target === invitation) hideInvitation();
        });

        // T·ªëi ∆∞u: kh√≥a pinch-to-zoom kh√¥ng b·∫Øt bu·ªôc; ƒë√£ ƒë·ªÉ user-scalable=yes ·ªü meta
      })();
    </script>
</body>
</html>

